<!DOCTYPE html>
<html lang="fa">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>داشبورد</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="/static/css/style.css" rel="stylesheet">
</head>
<body class="bg-gray-100">
  <div class="container mx-auto p-6">
    <div class="flex justify-between">
      <a href="http://127.0.0.1:8000/mypro/" class="bg-blue-500 text-white p-2 rounded">پروفایل</a>
      <a href="/posts.html" class="bg-blue-500 text-white p-2 rounded">پست‌ها</a>
      <a href="http://127.0.0.1:8000/exp/" class="bg-blue-500 text-white p-2 rounded">اکسپلور</a>
      <a href="/logout.html" class="bg-red-500 text-white p-2 rounded">خروج</a>
    </div>


{#<!DOCTYPE html>#}
{#<html lang="fa">#}
{#<head>#}
{#  <meta charset="UTF-8">#}
{#  <meta name="viewport" content="width=device-width, initial-scale=1.0">#}
{#  <title>داشبورد</title>#}
{#  <script src="https://cdn.tailwindcss.com"></script>#}
{##}
{#  <link href="/static/css/style.css" rel="stylesheet">#}
{#</head>#}
{#<body class="bg-gray-100">#}
{##}
{#  <div class="container mx-auto p-6">#}
{#    <!-- دکمه ها در بالای صفحه -->#}
{#    <div class="flex justify-between">#}
{#      <button class="bg-blue-500 text-white p-2 rounded" id="profile-btn">پروفایل</button>#}
{#      <button class="bg-blue-500 text-white p-2 rounded">پست‌ها</button>#}
{#      <button class="bg-blue-500 text-white p-2 rounded" id="explore-btn">اکسپلور</button>#}
{#      <button class="bg-red-500 text-white p-2 rounded" id="logout">خروج</button>#}
{#    </div>#}
{##}
{#    <!-- بخش جستجوی اکسپلور -->#}
{#    <div id="explore-section" class="mt-10 hidden">#}
{#      <div class="mb-6">#}
{#        <input id="search-input" type="text" placeholder="جستجو بر اساس یوزرنیم" class="p-2 rounded border w-full">#}
{#      </div>#}
{#      <div id="search-results" class="space-y-4">#}
{#        <!-- نتایج جستجو اینجا نمایش داده می‌شود -->#}
{#      </div>#}
{#    </div>#}
{##}
{#    <!-- پروفایل کاربر -->#}
{#    <div class="mt-10" id="profile-section">#}
{#      <div class="flex items-center">#}
{#        <img id="profile-avatar" src="" alt="Profile Avatar" class="rounded-full w-32 h-32">#}
{#        <div class="ml-4">#}
{#          <h2 id="profile-username" class="text-xl font-bold">نام کاربری</h2>#}
{#          <p id="profile-fullname" class="text-sm">نام و نام خانوادگی</p>#}
{#          <p id="profile-bio" class="text-sm text-gray-600">بیوگرافی</p>#}
{#          <p id="profile-age" class="text-sm text-gray-600">سن</p>#}
{#          <a href="http://127.0.0.1:8000/edpro/" id="edit-profile" class="bg-yellow-500 text-white p-2 rounded mt-4 hidden">ویرایش پروفایل</a>#}
{#            <button id="follow-unfollow-btn" class="bg-blue-500 text-white p-2 rounded mt-4 hidden"></button> <!-- اینجا دکمه فالو/آنفالو اضافه شده -->#}
{#          <button id="follow-unfollow-btn" class="bg-blue-500 text-white p-2 rounded mt-4 hidden"></button>#}
{#            <!-- دکمه ارسال پست -->#}
{#            <button class="bg-green-500 text-white p-2 rounded mt-4" id="post-btn">ارسال پست</button>#}
{##}
{#<!-- فرم ارسال پست -->#}
{#            <div id="post-form" class="mt-6 hidden">#}
{#            <textarea id="post-caption" placeholder="متن پست" class="p-2 rounded border w-full"></textarea>#}
{#            <input type="file" id="post-image" class="mt-4 p-2 rounded border">#}
{#                <button id="submit-post" class="bg-blue-500 text-white p-2 rounded mt-4">ارسال</button>#}
{#            </div>#}
{#            <div id="posts-container">#}
{#    <!-- پست‌ها اینجا نمایش داده می‌شوند -->#}
{#            </div>#}
{##}
{#        </div>#}
{#      </div>#}
{#      <div id="error-message" class="text-red-500 mt-4 hidden">مشکلی پیش آمده است!</div>#}
{#    </div>#}
{#  </div>#}
{##}
{#  <script>#}
{#    // تابع برای استخراج `user_id` از Access Token#}
{#    function parseJwt(token) {#}
{#        try {#}
{#            return JSON.parse(atob(token.split('.')[1])); // بخش Payload توکن#}
{#        } catch (e) {#}
{#            return null;#}
{#        }#}
{#    }#}
{##}
{#    document.addEventListener('DOMContentLoaded', async () => {#}
{#      const accessToken = localStorage.getItem("access_token");#}
{##}
{#      // چک کردن وضعیت لاگین#}
{#      if (!accessToken) {#}
{#        document.getElementById('error-message').classList.remove('hidden');#}
{#        return;#}
{#      }#}
{##}
{#      // استخراج `user_id` از توکن#}
{#      const userData = parseJwt(accessToken);#}
{#      const userId = userData ? userData.user_id : null;#}
{##}
{#      if (!userId) {#}
{#        console.error("شناسه کاربر یافت نشد!");#}
{#        document.getElementById('error-message').classList.remove('hidden');#}
{#        return;#}
{#      }#}
{##}
{#      // بارگذاری پروفایل کاربر فعلی با استفاده از شناسه کاربر#}
{#      try {#}
{#        const profileResponse = await fetch(`http://127.0.0.1:8000/profile/${userId}/`, { // درخواست با شناسه کاربر#}
{#          method: "GET",#}
{#          headers: {#}
{#            "Authorization": `Bearer ${accessToken}`,#}
{#            "Content-Type": "application/json"#}
{#          }#}
{#        });#}
{##}
{#        if (profileResponse.ok) {#}
{#          const profileData = await profileResponse.json();#}
{#          document.getElementById('profile-avatar').src = profileData.avatar || '/default-avatar.png';#}
{#          document.getElementById('profile-username').textContent = profileData.username || 'نام کاربری نامشخص';#}
{#          document.getElementById('profile-fullname').textContent = profileData.full_name.trim() || 'نام کامل ثبت نشده';#}
{#          document.getElementById('profile-bio').textContent = profileData.bio ? `بیو: ${profileData.bio}` : 'بیوگرافی ثبت نشده است';#}
{#          document.getElementById('profile-age').textContent = profileData.age ? `سن: ${profileData.age}` : 'سن ثبت نشده است';#}
{#        } else {#}
{#          throw new Error('خطا در دریافت اطلاعات پروفایل');#}
{#        }#}
{#      } catch (error) {#}
{#        document.getElementById('error-message').classList.remove('hidden');#}
{#        console.error('خطا در دریافت اطلاعات پروفایل:', error);#}
{#      }#}
{#    });#}
{##}
{#    // رفتن به صفحه پروفایل#}
{#    document.getElementById('profile-btn').addEventListener('click', () => {#}
{#      document.getElementById('explore-section').classList.add('hidden');#}
{#      document.getElementById('profile-section').classList.remove('hidden');#}
{#    });#}
{##}
{#    // رفتن به صفحه اکسپلور#}
{#    document.getElementById('explore-btn').addEventListener('click', () => {#}
{#      document.getElementById('profile-section').classList.add('hidden');#}
{#      document.getElementById('explore-section').classList.remove('hidden');#}
{#    });#}
{##}
{#    // جستجوی کاربران بر اساس یوزرنیم#}
{#    document.getElementById('search-input').addEventListener('input', async (e) => {#}
{#    const query = e.target.value;#}
{#    if (query.length < 3) {#}
{#      document.getElementById('search-results').innerHTML = '';#}
{#      return;#}
{#    }#}
{##}
{#    try {#}
{#      const response = await fetch(`http://127.0.0.1:8000/search/?search=${query}`, {  // اصلاح URL#}
{#        method: "GET",#}
{#        headers: {#}
{#          "Authorization": `Bearer ${localStorage.getItem("access_token")}`,#}
{#          "Content-Type": "application/json"#}
{#        }#}
{#      });#}
{##}
{#      if (response.ok) {#}
{#        const users = await response.json();#}
{#        displaySearchResults(users);#}
{#      } else {#}
{#        throw new Error('خطا در جستجو');#}
{#      }#}
{#    } catch (error) {#}
{#      console.error('خطا در جستجو:', error);#}
{#    }#}
{#  });#}
{##}
{#  // نمایش نتایج جستجو#}
{#  function displaySearchResults(users) {#}
{#    const resultsContainer = document.getElementById('search-results');#}
{#    resultsContainer.innerHTML = ''; // پاک کردن نتایج قبلی#}
{##}
{#    users.forEach(user => {#}
{#      const avatarUrl = user.profile && user.profile.avatar ? user.profile.avatar : 'https://via.placeholder.com/150';  // از تصویر پیش‌فرض استفاده کن#}
{##}
{#      const resultItem = document.createElement('div');#}
{#      resultItem.classList.add('flex', 'items-center', 'space-x-4', 'border-b', 'py-2');#}
{#      resultItem.innerHTML = `#}
{#        <img src="${avatarUrl}" alt="Avatar" class="rounded-full w-12 h-12">#}
{#        <div>#}
{#          <h3 class="text-lg">${user.username}</h3>#}
{#          <a href="#" class="text-blue-500 view-profile-btn" data-user-id="${user.id}">مشاهده پروفایل</a> <!-- تغییر لینک به دکمه -->#}
{#          <button class="bg-blue-500 text-white p-2 rounded follow-btn" data-user-id="${user.id}">فالو</button>#}
{#        </div>#}
{#      `;#}
{#      resultsContainer.appendChild(resultItem);#}
{##}
{#      // اضافه کردن قابلیت فالو کردن#}
{#      const followBtn = resultItem.querySelector('.follow-btn');#}
{#      followBtn.addEventListener('click', () => handleFollow(user.id));#}
{##}
{#      // اضافه کردن عملکرد برای دکمه مشاهده پروفایل#}
{#      const viewProfileBtn = resultItem.querySelector('.view-profile-btn');#}
{#      viewProfileBtn.addEventListener('click', (e) => {#}
{#        e.preventDefault(); // جلوگیری از تغییر لینک#}
{#        displayUserProfile(user.id); // نمایش پروفایل کاربر#}
{#      });#}
{#    });#}
{#  }#}
{##}
{#  // تابع برای نمایش پروفایل کاربر#}
{#async function displayUserProfile(userId) {#}
{#  const accessToken = localStorage.getItem('access_token');#}
{#  try {#}
{#    const response = await fetch(`http://127.0.0.1:8000/profile/${userId}/`, {#}
{#      method: "GET",#}
{#      headers: {#}
{#        "Authorization": `Bearer ${accessToken}`,#}
{#        "Content-Type": "application/json"#}
{#      }#}
{#    });#}
{##}
{#    if (response.ok) {#}
{#      const userProfile = await response.json();#}
{#      // به روز رسانی اطلاعات پروفایل#}
{#      document.getElementById('profile-avatar').src = userProfile.avatar || '/media/img/profile/default-avatar.png';#}
{#      document.getElementById('profile-username').textContent = userProfile.username || 'نام کاربری نامشخص';#}
{#      document.getElementById('profile-fullname').textContent = userProfile.full_name || 'نام کامل ثبت نشده';#}
{#      document.getElementById('profile-bio').textContent = userProfile.bio ? `بیو: ${userProfile.bio}` : 'بیوگرافی ثبت نشده است';#}
{#      document.getElementById('profile-age').textContent = userProfile.age ? `سن: ${userProfile.age}` : 'سن ثبت نشده است';#}
{##}
{#      // بررسی و مخفی/نمایش دکمه‌ها#}
{#      const currentUserId = parseJwt(localStorage.getItem("access_token")).user_id;#}
{##}
{#      const editProfileButton = document.getElementById('edit-profile');#}
{#      const followUnfollowButton = document.getElementById('follow-unfollow-btn');#}
{##}
{#      if (!editProfileButton || !followUnfollowButton) {#}
{#        console.error('دکمه‌های پروفایل یا فالو پیدا نشدند!');#}
{#        return;#}
{#      }#}
{##}
{#      if (userId === currentUserId) {#}
{#        // نمایش دکمه ویرایش پروفایل برای کاربر خودی#}
{#        editProfileButton.classList.remove('hidden');#}
{#        followUnfollowButton.classList.add('hidden');#}
{#      } else {#}
{#        // مخفی کردن دکمه ویرایش پروفایل و نمایش دکمه فالو/آنفالو برای کاربر دیگر#}
{#        editProfileButton.classList.add('hidden');#}
{#        followUnfollowButton.classList.remove('hidden');#}
{##}
{#        // بررسی وضعیت فالو#}
{#        checkFollowStatus(userId);#}
{#      }#}
{##}
{#      // نمایش پروفایل و مخفی کردن بخش جستجو#}
{#      document.getElementById('profile-section').classList.remove('hidden');#}
{#      document.getElementById('explore-section').classList.add('hidden');#}
{#    } else {#}
{#      throw new Error('خطا در دریافت اطلاعات پروفایل');#}
{#    }#}
{#  } catch (error) {#}
{#    document.getElementById('error-message').classList.remove('hidden');#}
{#    console.error('خطا در دریافت پروفایل:', error);#}
{#  }#}
{#}#}
{##}
{##}
{#  // بررسی وضعیت فالو کردن#}
{#  async function checkFollowStatus(userId) {#}
{#    const accessToken = localStorage.getItem('access_token');#}
{#    try {#}
{#      const response = await fetch(`http://127.0.0.1:8000/users-list/${userId}/`, {  // فرض کنید این endpoint وضعیت فالو را می‌دهد#}
{#        method: "GET",#}
{#        headers: {#}
{#          "Authorization": `Bearer ${accessToken}`,#}
{#          "Content-Type": "application/json"#}
{#        }#}
{#      });#}
{##}
{#      if (response.ok) {#}
{#        const data = await response.json();#}
{#        const followBtn = document.getElementById('follow-unfollow-btn');#}
{#        if (data.is_following) {#}
{#          followBtn.textContent = 'آنفالو';#}
{#          followBtn.classList.add('bg-red-500');#}
{#          followBtn.classList.remove('bg-blue-500');#}
{#        } else {#}
{#          followBtn.textContent = 'فالو';#}
{#          followBtn.classList.add('bg-blue-500');#}
{#          followBtn.classList.remove('bg-red-500');#}
{#        }#}
{#      }#}
{#    } catch (error) {#}
{#      console.error('خطا در بررسی وضعیت فالو:', error);#}
{#    }#}
{#  }#}
{##}
{#  // فالو یا آنفالو کردن کاربر#}
{#  async function handleFollow(userId) {#}
{#    const accessToken = localStorage.getItem('access_token');#}
{#    const followBtn = document.getElementById('follow-unfollow-btn');#}
{#    try {#}
{#      const response = await fetch("http://127.0.0.1:8000/request/", {#}
{#        method: "POST",#}
{#        headers: {#}
{#          "Authorization": `Bearer ${accessToken}`,#}
{#          "Content-Type": "application/json"#}
{#        },#}
{#        body: JSON.stringify({ user: userId })#}
{#      });#}
{##}
{#      if (response.ok) {#}
{#        if (followBtn.textContent === 'فالو') {#}
{#          followBtn.textContent = 'آنفالو';#}
{#          followBtn.classList.add('bg-red-500');#}
{#          followBtn.classList.remove('bg-blue-500');#}
{#        } else {#}
{#          followBtn.textContent = 'فالو';#}
{#          followBtn.classList.add('bg-blue-500');#}
{#          followBtn.classList.remove('bg-red-500');#}
{#        }#}
{#      } else {#}
{#        throw new Error('خطا در فالو کردن/آنفالو کردن');#}
{#      }#}
{#    } catch (error) {#}
{#      console.error('خطا در فالو یا آنفالو:', error);#}
{#    }#}
{#  }#}
{##}
{#    // خروج کاربر#}
{#    document.getElementById('logout').addEventListener('click', () => {#}
{#      localStorage.removeItem('access_token');#}
{#      window.location.replace('http://127.0.0.1:8000/login/');#}
{#    });#}
{##}
{##}
{#  document.getElementById('post-btn').addEventListener('click', () => {#}
{#    document.getElementById('post-form').classList.toggle('hidden');#}
{#});#}
{##}
{#// ارسال پست به سرور#}
{#document.getElementById('submit-post').addEventListener('click', async () => {#}
{#    const caption = document.getElementById('post-caption').value;#}
{#    const image = document.getElementById('post-image').files[0];#}
{#    const accessToken = localStorage.getItem("access_token");#}
{##}
{#    if (!caption || !image) {#}
{#        alert("لطفاً همه فیلدها را پر کنید.");#}
{#        return;#}
{#    }#}
{##}
{#    const formData = new FormData();#}
{#    formData.append('caption', caption);#}
{#    formData.append('image', image);#}
{##}
{#    try {#}
{#        const response = await fetch('http://127.0.0.1:8000/post/', {#}
{#            method: 'POST',#}
{#            headers: {#}
{#                'Authorization': `Bearer ${accessToken}`,#}
{#            },#}
{#            body: formData#}
{#        });#}
{##}
{#        if (response.ok) {#}
{#            alert("پست با موفقیت ارسال شد!");#}
{#            document.getElementById('post-form').classList.add('hidden');#}
{#            // بارگذاری دوباره پست‌ها یا انجام عملیات دیگر#}
{#        } else {#}
{#            const errorData = await response.json();#}
{#            console.error("خطا در ارسال پست:", errorData);#}
{#        }#}
{#    } catch (error) {#}
{#        console.error('خطا در ارتباط با سرور:', error);#}
{#    }#}
{#});#}
{#async function handleLike(postId) {#}
{#    const accessToken = localStorage.getItem('access_token');#}
{#    try {#}
{#        const response = await fetch(`http://127.0.0.1:8000/post/${postId}/likes/`, {#}
{#            method: 'POST',#}
{#            headers: {#}
{#                'Authorization': `Bearer ${accessToken}`,#}
{#                'Content-Type': 'application/json',#}
{#            },#}
{#        });#}
{##}
{#        if (response.ok) {#}
{#            alert("لایک شد!");#}
{#            // بروزرسانی تعداد لایک‌ها#}
{#        } else {#}
{#            console.error("خطا در ارسال لایک");#}
{#        }#}
{#    } catch (error) {#}
{#        console.error("خطا در ارتباط با سرور:", error);#}
{#    }#}
{#}#}
{#async function postComment(postId) {#}
{#    const commentText = document.getElementById('comment-text').value;#}
{#    const accessToken = localStorage.getItem('access_token');#}
{##}
{#    if (!commentText) {#}
{#        alert("لطفاً متن کامنت را وارد کنید.");#}
{#        return;#}
{#    }#}
{##}
{#    try {#}
{#        const response = await fetch(`http://127.0.0.1:8000/post/${postId}/comments/`, {#}
{#            method: 'POST',#}
{#            headers: {#}
{#                'Authorization': `Bearer ${accessToken}`,#}
{#                'Content-Type': 'application/json',#}
{#            },#}
{#            body: JSON.stringify({ text: commentText })#}
{#        });#}
{##}
{#        if (response.ok) {#}
{#            alert("کامنت با موفقیت ارسال شد!");#}
{#            // بروزرسانی کامنت‌ها#}
{#        } else {#}
{#            console.error("خطا در ارسال کامنت");#}
{#        }#}
{#    } catch (error) {#}
{#        console.error("خطا در ارتباط با سرور:", error);#}
{#    }#}
{#}#}
{#document.addEventListener("DOMContentLoaded", function() {#}
{#    loadPosts();#}
{#});#}
{##}
{#async function loadPosts() {#}
{#    try {#}
{#        const response = await fetch("http://127.0.0.1:8000/post/", {#}
{#            method: "GET",#}
{#            headers: {#}
{#                "Authorization": `Bearer ${localStorage.getItem("access_token")}`,#}
{#                "Content-Type": "application/json"#}
{#            }#}
{#        });#}
{##}
{#        if (response.ok) {#}
{#            const data = await response.json();#}
{#            let postsContainer = document.getElementById("posts-container");#}
{#            postsContainer.innerHTML = ""; // پاک کردن محتوای قبلی#}
{##}
{#            data.forEach(post => {#}
{#                let postElement = document.createElement("div");#}
{#                postElement.classList.add("p-4", "bg-white", "rounded-lg", "shadow-md", "mb-4");#}
{##}
{#                postElement.innerHTML = `#}
{#                    <div class="flex items-center mb-2">#}
{#                        <img src="${post.user_avatar || 'https://via.placeholder.com/50'}" alt="Avatar" class="w-10 h-10 rounded-full">#}
{#                        <span class="ml-2 font-bold">${post.username}</span>#}
{#                    </div>#}
{#                    <img src="${post.image}" alt="Post Image" class="w-full rounded-lg mb-2">#}
{#                    <p>${post.caption}</p>#}
{##}
{#                    <div class="flex items-center mt-2">#}
{#                        <button onclick="likePost(${post.id})" class="text-red-500 text-lg">❤️</button>#}
{#                        <span id="like-count-${post.id}" class="ml-2">${post.likes}</span>#}
{#                    </div>#}
{##}
{#                    <div class="mt-2">#}
{#                        <input type="text" id="comment-input-${post.id}" placeholder="نظر خود را بنویسید..." class="border p-2 rounded w-full">#}
{#                        <button onclick="addComment(${post.id})" class="bg-blue-500 text-white p-2 rounded mt-2">ارسال</button>#}
{#                    </div>#}
{##}
{#                    <div id="comments-${post.id}" class="mt-2 text-gray-600">#}
{#                        <!-- کامنت‌ها اینجا نمایش داده می‌شوند -->#}
{#                    </div>#}
{#                `;#}
{##}
{#                postsContainer.appendChild(postElement);#}
{##}
{#                loadComments(post.id);#}
{#            });#}
{#        } else {#}
{#            console.error("خطا در دریافت پست‌ها");#}
{#        }#}
{#    } catch (error) {#}
{#        console.error("خطا در ارتباط با سرور:", error);#}
{#    }#}

{##}
{#async function likePost(postId) {#}
{#    try {#}
{#        const response = await fetch(`http://127.0.0.1:8000/post/${postId}/likes/`, {#}
{#            method: "POST",#}
{#            headers: {#}
{#                "Authorization": `Bearer ${localStorage.getItem("access_token")}`,#}
{#                "Content-Type": "application/json"#}
{#            }#}
{#        });#}
{##}
{#        if (response.ok) {#}
{#            let likeCountElement = document.getElementById(`like-count-${postId}`);#}
{#            let currentLikes = parseInt(likeCountElement.textContent);#}
{#            likeCountElement.textContent = currentLikes + 1;#}
{#        } else {#}
{#            console.error("خطا در ارسال لایک");#}
{#        }#}
{#    } catch (error) {#}
{#        console.error("خطا در ارتباط با سرور:", error);#}
{#    }#}
{#}#}
{##}
{#async function addComment(postId) {#}
{#    const commentInput = document.getElementById(`comment-input-${postId}`);#}
{#    const commentText = commentInput.value.trim();#}
{##}
{#    if (!commentText) {#}
{#        alert("لطفاً متن کامنت را وارد کنید.");#}
{#        return;#}
{#    }#}
{##}
{#    try {#}
{#        const response = await fetch(`http://127.0.0.1:8000/post/${postId}/comments/`, {#}
{#            method: "POST",#}
{#            headers: {#}
{#                "Authorization": `Bearer ${localStorage.getItem("access_token")}`,#}
{#                "Content-Type": "application/json"#}
{#            },#}
{#            body: JSON.stringify({ text: commentText })#}
{#        });#}
{##}
{#        if (response.ok) {#}
{#            commentInput.value = "";#}
{#            loadComments(postId);#}
{#        } else {#}
{#            console.error("خطا در ارسال کامنت");#}
{#        }#}
{#    } catch (error) {#}
{#        console.error("خطا در ارتباط با سرور:", error);#}
{#    }#}
{#}#}
{##}
{#async function loadComments(postId) {#}
{#    try {#}
{#        const response = await fetch(`http://127.0.0.1:8000/post/${postId}/comments/`, {#}
{#            method: "GET",#}
{#            headers: {#}
{#                "Authorization": `Bearer ${localStorage.getItem("access_token")}`,#}
{#                "Content-Type": "application/json"#}
{#            }#}
{#        });#}
{##}
{#        if (response.ok) {#}
{#            const comments = await response.json();#}
{#            let commentsContainer = document.getElementById(`comments-${postId}`);#}
{#            commentsContainer.innerHTML = "";#}
{##}
{#            comments.forEach(comment => {#}
{#                let commentElement = document.createElement("div");#}
{#                commentElement.classList.add("p-2", "border-b");#}
{#                commentElement.innerHTML = `<strong>${comment.username}:</strong> ${comment.text}`;#}
{#                commentsContainer.appendChild(commentElement);#}
{#            });#}
{#        } else {#}
{#            console.error("خطا در دریافت کامنت‌ها");#}
{#        }#}
{#    } catch (error) {#}
{#        console.error("خطا در ارتباط با سرور:", error);#}
{#    }#}

{#  </script>#}
{#</body>#}
{#</html>#}